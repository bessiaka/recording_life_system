# üîß Troubleshooting Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ—à–µ–Ω–∏—é —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–ø–æ—Ä—Ç–∞–º–∏)
- [–ó–æ–º–±–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã](#–∑–æ–º–±–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å Docker](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-docker)
- [–û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏](#–æ—à–∏–±–∫–∏-—Å–±–æ—Ä–∫–∏)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏)

---

## –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏

### ‚ùå Error: `Bind for 0.0.0.0:8000 failed: port is already allocated`

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –£–∑–Ω–∞—Ç—å, –∫—Ç–æ –∑–∞–Ω—è–ª –ø–æ—Ä—Ç
sudo lsof -i :8000
# –∏–ª–∏
sudo ss -tlnp | grep 8000
```

**–†–µ—à–µ–Ω–∏–µ:**

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ**
```bash
./scripts/start.sh development
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ—Ä—Ç—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –∏—Ö
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞**
```bash
# –ù–∞–π—Ç–∏ PID –ø—Ä–æ—Ü–µ—Å—Å–∞
sudo lsof -i :8000

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–∑–∞–º–µ–Ω–∏—Ç–µ <PID> –Ω–∞ ID –∏–∑ –≤—ã–≤–æ–¥–∞ –≤—ã—à–µ)
sudo kill -9 <PID>

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
sudo lsof -i :8000
```

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ .env —Ñ–∞–π–ª–µ**
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env.development –∏–ª–∏ .env.production
nano .env.development

# –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã:
BACKEND_PORT=8003   # –í–º–µ—Å—Ç–æ 8000
FRONTEND_PORT=3003  # –í–º–µ—Å—Ç–æ 3000
```

### üîç –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∑–∞–Ω–∏–º–∞—é—â–∏–µ –ø–æ—Ä—Ç—ã

| –ü—Ä–æ—Ü–µ—Å—Å | –ü–æ—Ä—Ç | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|---------|------|---------|---------|
| `code` | 8000 | VS Code Live Server / Debugger | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç |
| `docker-proxy` | 8000 | –°—Ç–∞—Ä—ã–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä | `docker stop <container>` |
| `python` | 8000 | –ó–∞–ø—É—â–µ–Ω–Ω—ã–π dev-—Å–µ—Ä–≤–µ—Ä | –ù–∞–π—Ç–∏ –∏ —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å |
| `node` | 3000 | React/Vite dev server | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å npm/yarn –ø—Ä–æ—Ü–µ—Å—Å |

---

## –ó–æ–º–±–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### ‚ùå Error: `cannot stop container: tried to kill container, but did not receive an exit event`

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–∑–æ–º–±–∏" –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å Docker daemon.

**Exit code 137** –æ–∑–Ω–∞—á–∞–µ—Ç SIGKILL - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ã–ª —É–±–∏—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ:**

**–®–∞–≥ 1: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ**
```bash
docker rm -f <container_name>
# –∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞:
docker ps -a | grep recording_life | awk '{print $1}' | xargs -r docker rm -f
```

**–®–∞–≥ 2: –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker daemon**
```bash
sudo systemctl restart docker

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5-10 —Å–µ–∫—É–Ω–¥
sleep 5

# –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
docker rm -f <container_name>
```

**–®–∞–≥ 3: –ö—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π - –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Docker**
```bash
# ‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –£–¥–∞–ª–∏—Ç –í–°–ï –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker container prune -f

# –£–¥–∞–ª–∏—Ç –í–°–ï –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–±—Ä–∞–∑—ã, —Å–µ—Ç–∏, —Ç–æ–º–∞
docker system prune -a --volumes -f
```

### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–≤–∫–ª—é—á–∞—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ)
docker ps -a

# –¢–æ–ª—å–∫–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ
docker ps

# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Restarting
docker ps -a --filter "status=restarting"

# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker logs <container_name>
docker logs -f <container_name>  # Follow mode
```

---

## –ü—Ä–æ–±–ª–µ–º—ã —Å Docker

### ‚ùå Docker daemon –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
sudo systemctl status docker
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker
sudo systemctl restart docker

# –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
sudo systemctl stop docker
sudo systemctl start docker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo journalctl -u docker.service -n 100 --no-pager
```

### ‚ùå Permission denied –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Docker

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤ –≥—Ä—É–ø–ø–µ `docker`.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–≤—ã–π—Ç–∏ –∏ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ)
newgrp docker

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
sudo reboot
```

---

## –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏

### ‚ùå Build failed: no space left on device

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∫–∞ Docker –∫–µ—à–∞
docker system prune -a --volumes -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–∞
df -h

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤
docker image prune -a -f
```

### ‚ùå Build failed: network timeout

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é –∏–ª–∏ –∑–µ—Ä–∫–∞–ª–∞ –ø–∞–∫–µ—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É —Å --no-cache
docker compose --env-file=.env.development build --no-cache

# –ò–ª–∏ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º timeout
export DOCKER_CLIENT_TIMEOUT=300
export COMPOSE_HTTP_TIMEOUT=300
docker compose --env-file=.env.development build
```

---

## –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

### ‚ùå –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É development –∏ production

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ—Ä—Ç—ã –∏–ª–∏ –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `COMPOSE_PROJECT_NAME` –≤ .env —Ñ–∞–π–ª–∞—Ö:

```bash
# .env.development
COMPOSE_PROJECT_NAME=recording_life_dev

# .env.production
COMPOSE_PROJECT_NAME=recording_life_prod
```

### ‚ùå Environment variables –Ω–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ .env —Ñ–∞–π–ª–∞
cat .env.development

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∏–¥–∏—Ç Docker Compose
docker compose --env-file=.env.development config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose --env-file=.env.development exec backend env
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
docker compose --env-file=.env.development up -d --force-recreate
```

---

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
```bash
./scripts/check-ports.sh .env.development
./scripts/check-ports.sh .env.production
```

### –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
```bash
./scripts/start.sh development  # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./scripts/start.sh production   # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
```

### –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Docker
docker info

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats --no-stream

# –°–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
docker network ls
docker network inspect recording_life_system-network

# Volumes
docker volume ls
```

---

## üìû –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. **–°–æ–±–µ—Ä–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:**
```bash
# Docker version
docker --version
docker compose version

# System info
uname -a

# Docker logs
sudo journalctl -u docker.service -n 100 --no-pager > docker-daemon.log

# Container logs
docker compose --env-file=.env.development logs > container.log
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - [ENVIRONMENTS.md](./ENVIRONMENTS.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π
   - [ARCHITECTURE.md](./.github/runner-forgejo/ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ CI/CD
   - [README.md](./README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

3. **–°–æ–∑–¥–∞–π—Ç–µ issue** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏.

---

## üîÑ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ
docker compose --env-file=.env.development down -v

# –û—á–∏—Å—Ç–∫–∞
docker system prune -f

# –ó–∞–ø—É—Å–∫ –∑–∞–Ω–æ–≤–æ
./scripts/start.sh development
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose --env-file=.env.development ps

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose --env-file=.env.development logs -f

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

### –û—Ç–ª–∞–¥–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```bash
# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä backend
docker compose --env-file=.env.development exec backend sh

# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä frontend
docker compose --env-file=.env.development exec frontend sh

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –±–µ–∑ –≤—Ö–æ–¥–∞
docker compose --env-file=.env.development exec backend python --version
```
